extends layout

block content
  - const PAGINATION_PATH = '?';
  - const ARTICLE_ANNOUNCE_LENGTH = 100;
  - const MAX_COMMENT_LENGTH = 100;
  - const hasArticles = Boolean(articles.length);
  - const hasHotArticles = Boolean(hotArticles.length);
  - const hasLastComments = Boolean(lastComments.length);
  - const hasAutoHeight = !hasLastComments || !hasHotArticles;
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p –î–æ—Ä–æ—É üëè
    +categoriesList(categories)
    if hasArticles
      div.main-page__section-flex(class=`${hasAutoHeight ? 'main-page__section-flex--short' : ''}`)
        section.main-page__hot.hot
          h2.hot__name
            | –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
            |
            span.hot__icon.hot__icon--fire
          if hasHotArticles
            ul.hot__list
              each hotArticle of hotArticles
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${hotArticle.id}`)
                    +cutString(hotArticle.announce, ARTICLE_ANNOUNCE_LENGTH)
                    sup.hot__link-sup #{hotArticle.count}
          else
            p.hot__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
        section.main-page__last.last
          h2.last__name
            | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            |
            span.last__icon.last__icon--cloud
          if hasLastComments
            ul.last__list
              each lastComment of lastComments
                li.last__list-item
                  img.last__list-image(src=`img/${lastComment.user.avatar}` width='20' height='20' alt='–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')
                  b.last__list-name #{lastComment.user.firstName} #{lastComment.user.lastName}
                  a.last__list-link(href=`articles/${lastComment.articleId}`)
                    +cutString(lastComment.text, MAX_COMMENT_LENGTH)
          else
            p.hot__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
      +articlesList(articles, currentPage, totalPagesCount, PAGINATION_PATH)
    else
      div.main-page__empty-wrapper
        p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!
